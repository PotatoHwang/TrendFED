(function($){$.idleTimer=function(newTimeout){var idle=false,enabled=true,timeout=30000,events='mousemove keydown DOMMouseScroll mousewheel mousedown',toggleIdleState=function(){idle=!idle;$(document).trigger((idle?"idle":"active")+'.idleTimer');},isRunning=function(){return enabled;},isIdle=function(){return idle;},stop=function(){enabled=false;clearTimeout($.idleTimer.tId);$(document).unbind('.idleTimer');},handleUserEvent=function(){clearTimeout($.idleTimer.tId);if(enabled){if(idle){toggleIdleState();}
$.idleTimer.tId=setTimeout(toggleIdleState,timeout);}};if(typeof newTimeout=="number"){timeout=newTimeout;}else if(newTimeout==='destroy'){stop();return;}
$(document).bind($.trim((events+' ').split(' ').join('.idleTimer ')),handleUserEvent);$.idleTimer.tId=setTimeout(toggleIdleState,timeout);};})(jQuery);